## 检索字

paixubudengshi; Sort inequalities

## 前置知识

[和式](heshi.md) [极端原理](jiduanyuanli.md)

## 概念

### 基本定义

设非严格单调递增数列$\{a_n\}$与$\{b_n\}$，而$\{i_n\}$为$1,2,..,n$的任一排列。则有：

$$
\sum a_jb_j\ge\sum a_jb_{i_j}\ge\sum a_jb_{n-j+1}
$$

上式记作**排序不等式**。即“顺序和≥乱序和≥逆序和”。当且仅当$a_1=...=a_n$或$b_1=...=b_n$时取等。

### 证明

**方法1**

证明采用[调整法](tiaozhengfa.md)。

令$M=a_1b_{i_1}+...+a_nb_{i_n}$，若$b_{i_k}>b_{i_{k+1}}$，取$b_{i_{k'}}=b_{i_{k+1}},b_{i_{k'+1}}=b_{i_k}$，其它项不变。则：

$M'-M=a_kb_{i_k'}+a_{k+1}b_{i_{k'+1}}-a_k{b_{i_k}}-a_{k+1}b_{i_{k}}=a_kb_{i_{k+1}}+a_{k+1}{b_{i_k}}-a_k{b_{i_k}}-a_{k+1}b_{i_{k+1}}$

$=(a_k-a_{k+1})(b_{i_{k+1}}-b_{i_k})\ge0$。

假设取到最大值 M 时，不满足$b_{i_1}\le...\le b_{i_n}$，则$\exists b_{i_k}>b_{i_{k+1}}$。此时交换它们，必得到更优解，与 M 为最大值矛盾。综上不等式得证。

**方法2**

采用[阿贝尔变换](abeierbianhuan.md)。

有

$$
\begin{matrix}
\sum a_jb_{i_j}&=&\sum_{1\le j< n}((a_j-a_{j+1})\sum_{1\le k\le j}b_{i_k})+a_n\sum b_{i_j}\\
&\le&\sum_{1\le j< n}((a_j-a_{j+1})\sum_{1\le k\le j}b_k)+a_n\sum b_j\\
&=&\sum a_jb_j
\end{matrix}
$$

第二个不等号类似。

*阿贝尔变化，本质即离散微积分中的分步求和法，它可在许多和式问题中大显身手。一些可用排序不等式处理的问题，使用阿贝尔变换甚至会更加方便。*

### 切比雪夫不等式

见[切比雪夫不等式](qiebixuefubudengshi.md)。

## 方法

### 基本思路：设序

排序不等式要求有大小关系，因而我们通常必须利用式子的对称性来设序。

对于[完全对称](duichenshi)的式子，我们可以设出全序。例如设$x_1\le x_2\le...\le x_n$，而对于[轮换对称](duichenshi.md)的式子，只能设出最大值或最小值（但二者不可同时设出），例如设$x_1=\max(x_1,...,x_n)$或$x_1=\min(x_1,...,x_n)$。

排序不等式给我们一个思想：**纯种即大，杂种即小**（ref：《创知路数学竞赛教程 - 不等式篇》P48对话8）。比如下面的例题1。

**例1** 证明$x^2+y^2+z^2\ge xy+yz+zx$。

**证明**

不妨设$x\le y\le z$，则显。

**例2** 证明$\sum\limits_{cyc}\dfrac a{b+c}\ge\dfrac32$。

**证明**

由于左侧完全对称，不妨设$a\ge b\ge c$，则$\dfrac1{b+c}\ge\dfrac1{c+a}\ge\dfrac1{a+b}$。

由排序不等式，显然有

$$
\begin{matrix}
\dfrac a{b+c}+\dfrac b{c+a}+\dfrac c{a+b}\ge\dfrac b{b+c}+\dfrac c{c+a}+\dfrac a{a+b}\\
\dfrac a{b+c}+\dfrac b{c+a}+\dfrac c{a+b}\ge\dfrac c{b+c}+\dfrac a{c+a}+\dfrac b{a+b}
\end{matrix}
$$

相加即证。

注：两个不等式右侧的排列选择$b,c,a$与$c,a,b$，恰好能够与分母抵消。

### 排列处理

**例3** 试证明：对于前2007个正整数，不存在四个排列$a,b,c,d$,使$a_1b_1+...+a_{2007}b_{2007}=2(c_1d_1+...+c_{2007}d_{2007})$。

**证明**

正难则反，我们考虑如何构造这四个排列，从而得出矛盾。

前2007个正整数，设它们的两个排列对应相乘再相加的结果的取值范围在$[M,N]$内。则我们的任务是从$[M,N]$中找到两个数，其中一个数为另一数的两倍，并构造两组排列，每组两个排列对应相乘再相加的结果分别等于这两个数。

首先求出$M$和$N$。利用排序不等式，显然有$M=1349397084,N=2696779140$。

注意到$2M>N$，因此不存在这样的两个数。

故得证。

### 解题利器：齐次化

[齐次化](qicihua.md)

对于不那么强，且变量对称性较好的不等式，有一种思路几乎是万能的，即暴力展开并齐次化后使用均值/排序/[舒尔](shuerbudengshi.md)不等式。

譬如：

**例4** 若$a+b+c=1$试证明：$27(a^3+b^3+c^3)\ge6(a^2+b^2+c^2)+1$。

**证明**

考虑齐次化，$RHS=6(a^2+b^2+c^2)(a+b+c)+(a+b+c)^3$，则原不等式等价于：

$$
27\sum a^3\ge6(\sum a^3+\sum_{cyc}a^2b+\sum_{cyc}ab^2)+\sum a^3+3\sum_{cyc}a^2b+3\sum_{cyc}ab^2+6abc
$$

即

$$
20\sum a^3\ge9(\sum_{cyc}(a^2b+ab^2))+6bac
$$

显然有

$$
9\sum a^3\ge9\sum_{cyc}a^2b,9\sum a^3\ge9\sum_{cyc}ab^2,2\sum a^3\ge6abc
$$

相加即证。

齐次化有时也不那么好做，譬如变量对称性并不够好，或者不等式很强。

具体可见[不等式强弱律](budengshiqiangruolv.md)。

### 零和权重

这是一种特殊的权重，它将可以同时出现正权值和负权值。

它于题中出现时，即形如$\sum x_j=0$的条件。它有一个显然但重要的性质，即正项和与负项和的绝对值相等。

有时为了能够处理出正项和与负项和的具体值，题中还会给出类似$\sum|x_j|=1$的条件。联立两式，则可解出正项和$A$与负项和$B$。

**例5** 设$\{x_n\},\{a_n\}\in\textbf{R}$，且$\sum x_j=0,\sum|x_j|=1,\{a_n\}$非严格单调递减。求证：$|\sum x_ja_j|\le\dfrac12(a_1-a_n)$。

**证明**

设$\{x_n\}$中正的部分为$x_{j_1},...,x_{j_s}$之和为$A$，负的部分$x_{k_1},...,x_{k_t}$之和的绝对值为$B$，则$A-B=0,A+B=1$。得到$A=B=0.5$。

不妨设$\sum x_ja_j\ge0$，则由排序不等式，$\sum x_ja_j\le a_1x_{j_1}+...+a_sx_{j_s}+a_{s+1}x_{k_1}+...+a_nx_{k_t}$

而$RHS\le a_1A+a_nB=\dfrac12(a_1-a_n)$，故命题得证。